- name: "Playing with Ansible and Git"
  hosts: localhost
  connection: local
  tasks:
    - name: Run apt-update and apt-upgrade
      apt:
          upgrade: yes
          update_cache: yes
    - name: Install docker-io
      apt:
          name: docker.io
          state: latest
          update_cache: true
    - name: Install or upgrade docker-compose
      get_url:
        url: "https://github.com/docker/compose/releases/download/{{ docker_compose_version }}/docker-compose-Linux-x86_64"
        dest: /usr/local/bin/docker-compose
        mode: 'a+x'
        force: yes
      when: >
          docker_compose_current_version is not defined
          or docker_compose_current_version is version(docker_compose_version, '<')
    - name: Docker compose down
      shell: docker-compose down
    - name: Docker compose up
      shell: docker-compose up

