- name: "Playing with Ansible and Git"
  hosts: web
  become: yes
  tasks:
    - name: Run apt-update and apt-upgrade
      apt:
          upgrade: yes
          update_cache: yes
    - name: Install docker-io
      apt:
          name: docker.io
          state: latest
          update_cache: true
    - name: Install docker-compose from official github repo
      get_url:
        url: https://github.com/docker/compose/releases/download/1.29.2/docker-compose-Linux-x86_64
        dest: /usr/local/bin/docker-compose
        mode: 'u+x,g+x
    - name: Docker compose down
      run: docker-compose down
    - name: Docker compose up
      run: docker-compose up